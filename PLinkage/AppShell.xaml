<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="PLinkage.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:PLinkage.Views;assembly=PLinkage"
    Shell.FlyoutBehavior="Flyout"
    Title="PLinkage">

    <Shell.FlyoutHeader>
        <StackLayout Padding="10" Spacing="10">
            <Image Source="plinkage_logo.png" WidthRequest="100" HeightRequest="100" HorizontalOptions="Center"/>
            <Label Text="{Binding WelcomeMessage}" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center" />
            <Label Text="{Binding UserRoleMessage}" FontSize="14" HorizontalOptions="Center" />

            <Button Text="Logout"
                Command="{Binding LogoutCommand}"
                IsVisible="{Binding IsLoggedIn}"
                BackgroundColor="Red"
                TextColor="White"
                HorizontalOptions="Center"
                WidthRequest="100"
                CornerRadius="10"/>
        </StackLayout>
    </Shell.FlyoutHeader>

    <ShellContent
    Route="LoginView"
    ContentTemplate="{DataTemplate views:LoginView}"
    FlyoutItemIsVisible="False" />

    <!-- Admin Menu -->
    <FlyoutItem Title="Home" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminHomeView" 
            ContentTemplate="{DataTemplate views:AdminHomeView}" />
    </FlyoutItem>
    <FlyoutItem Title="Browse Projects" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminBrowseProjectsView" 
            ContentTemplate="{DataTemplate views:AdminBrowseProjectsView}" />
    </FlyoutItem>

    <FlyoutItem Title="Browse Project Owners" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminBrowseProjectOwnerView" 
            ContentTemplate="{DataTemplate views:AdminBrowseProjectOwnerView}" />
    </FlyoutItem>

    <FlyoutItem Title="Browse Skill Providers" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminBrowseSkillProvidersView" 
            ContentTemplate="{DataTemplate views:AdminBrowseSkillProvidersView}" />
    </FlyoutItem>
    
    <FlyoutItem Title="My Messages" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminViewProjectOwnerProfileView" 
        ContentTemplate="{DataTemplate views:AdminMessagesView}" />
    </FlyoutItem>
    
    <!--
    <FlyoutItem Title="[DEBUG] View Project" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminViewProjectView" 
        ContentTemplate="{DataTemplate views:AdminViewProjectView}" />
    </FlyoutItem>
    <FlyoutItem Title="[DEBUG] View Skill Provider Profile" IsVisible="{Binding IsAdmin}">
        <ShellContent Route="AdminViewSkillProviderProfileView" 
        ContentTemplate="{DataTemplate views:AdminViewSkillProviderProfileView}" />
    </FlyoutItem>-->

    <!-- Project Owner Menu -->
    <FlyoutItem Title="Home" IsVisible="{Binding IsProjectOwner}">
        <ShellContent Route="ProjectOwnerHomeView" 
              ContentTemplate="{DataTemplate views:ProjectOwnerHomeView}" />
    </FlyoutItem>

    <FlyoutItem Title="My Profile" IsVisible="{Binding IsProjectOwner}">
        <ShellContent Route="ProjectOwnerProfileView" 
      ContentTemplate="{DataTemplate views:ProjectOwnerProfileView}" />
    </FlyoutItem>

    <FlyoutItem Title="Browse Skill Providers" IsVisible="{Binding IsProjectOwner}">
        <ShellContent Route="ProjectOwnerBrowseSkillProviderView" 
      ContentTemplate="{DataTemplate views:ProjectOwnerBrowseSkillProviderView}" />
    </FlyoutItem>

    <FlyoutItem Title="Applications and Offers" IsVisible="{Binding IsProjectOwner}">
        <ShellContent Route="ProjectOwnerOffersAndApplicationsView" 
      ContentTemplate="{DataTemplate views:ProjectOwnerOffersAndApplicationsView}" />
    </FlyoutItem>

    <FlyoutItem Title="My Messages" IsVisible="{Binding IsProjectOwner}">
        <ShellContent Route="ProjectOwnerMessagesView" 
        ContentTemplate="{DataTemplate views:ProjectOwnerMessagesView}" />
    </FlyoutItem>

    <!-- Skill Provider Menu -->
    <FlyoutItem Title="Home" IsVisible="{Binding IsSkillProvider}">
        <ShellContent Route="SkillProviderHomeView" 
                ContentTemplate="{DataTemplate views:SkillProviderHomeView}" />
    </FlyoutItem>

    <FlyoutItem Title="My Profile" IsVisible="{Binding IsSkillProvider}">
        <ShellContent Route="SkillProviderProfileView" 
        ContentTemplate="{DataTemplate views:SkillProviderProfileView}" />
    </FlyoutItem>
    
    <FlyoutItem Title="Browse Projects" IsVisible="{Binding IsSkillProvider}">
        <ShellContent Route="SkillProviderBrowseProjectsView" 
        ContentTemplate="{DataTemplate views:SkillProviderBrowseProjectsView}" />
    </FlyoutItem>
    
    <FlyoutItem Title="Applications and Offers" IsVisible="{Binding IsSkillProvider}">
        <ShellContent Route="SkillProviderOffersAndApplicationsView" 
        ContentTemplate="{DataTemplate views:SkillProviderOffersAndApplicationsView}" />
    </FlyoutItem>

    <FlyoutItem Title="My Messages" IsVisible="{Binding IsSkillProvider}">
        <ShellContent Route="SkillProvidersMessagesView" 
        ContentTemplate="{DataTemplate views:SkillProviderMessagesView}" />
    </FlyoutItem>

</Shell>
