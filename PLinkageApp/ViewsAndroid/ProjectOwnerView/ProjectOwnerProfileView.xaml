<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PLinkageApp.ViewsAndroid.ProjectOwnerProfileView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:PLinkageApp.AndroidControls"
    xmlns:viewmodels="clr-namespace:PLinkageApp.ViewModels"
    Title="ProjectOwnerProfileView"
    Shell.NavBarIsVisible="False">
    <RefreshView Command="{Binding RefreshCommand}" IsRefreshing="{Binding IsBusy, Mode=OneWay}">
        <ScrollView>
            <VerticalStackLayout Spacing="10">
                <!--<controls:UserProfileCard
                    DeactivateActivateCommand="{Binding ToggleUserActivationCommand}"
                    IsDeactivateActivateButtonVisible="{Binding IsDeactivateButtonVisible}"
                    IsMessageButtonVisible="{Binding IsMessageButtonVisible}"
                    IsRatingVisible="{Binding IsRatingVisible}"
                    IsUpdateProfileButtonVisible="{Binding IsUpdateProfileButtonVisible}"
                    IsUserActivated="{Binding IsUserCurrentlyActive, Mode=TwoWay}"
                    JoinedDate="{Binding ProjectOwnerDto.JoinedOn}"
                    MessageCommand="{Binding MessageUserCommand}"
                    UserName="{Binding ProjectOwnerDto.UserName}"
                    UserRating="{Binding ProjectOwnerDto.UserRating}"
                    UserSubtitle="{Binding ProjectOwnerDto.UserLocation}" />-->

                <controls:UserProfileCard
                    DeactivateActivateCommand="{Binding ToggleUserActivationCommand}"
                    IsDeactivateActivateButtonVisible="false"
                    IsMessageButtonVisible="false"
                    IsRatingVisible="false"
                    IsSendOfferButtonVisible="false"
                    IsUpdateProfileButtonVisible="true"
                    IsUserActivated="{Binding IsUserCurrentlyActive, Mode=TwoWay}"
                    JoinedDate="{Binding ProjectOwnerDto.JoinedOn}"
                    MessageCommand="{Binding MessageUserCommand}"
                    UserName="{Binding ProjectOwnerDto.UserName}"
                    UserRating="{Binding ProjectOwnerDto.UserRating}"
                    UserSubtitle="{Binding ProjectOwnerDto.UserLocation}" />

                <StackLayout Padding="25,0,25,0">
                    <controls:InformationCard
                        Title="Information"
                        Email="{Binding ProjectOwnerDto.UserEmail}"
                        Gender="{Binding ProjectOwnerDto.UserGender}"
                        Mobile="{Binding ProjectOwnerDto.UserPhone}" />

                    <Grid ColumnDefinitions="*,Auto">
                        <Label
                            VerticalOptions="Center"
                            Grid.Column="0"
                            Margin="5,0,0,0"
                            FontAttributes="Bold"
                            FontSize="20"
                            Text="Owned Projects"
                            TextColor="#333333" />
                        <ImageButton
                            HorizontalOptions="End"
                            Aspect="Center"
                            BackgroundColor="Transparent"
                            Command="{Binding AddProjectCommand}"
                            HeightRequest="24"
                            Source="addicon.png"
                            VerticalOptions="Center"
                            WidthRequest="24" />
                    </Grid>

                    <controls:LabeledPicker PlaceholderText="Select Filter" TitleText="Filter By" ControlWidth="355" />
                    <CollectionView ItemsSource="{Binding ProjectOwnerDto.ProfileProjects}">

                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <controls:ProfileProjectCard
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:ViewProjectOwnerProfileViewModel}}, Path=ViewProjectCommand}"
                                    CommandParameter="{Binding .}"
                                    IsOwner="False"
                                    ProjectName="{Binding ProjectName}"
                                    ProjectStatus="{Binding ProjectStatus}" />
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </StackLayout>
            </VerticalStackLayout>
        </ScrollView>
    </RefreshView>
</ContentPage>