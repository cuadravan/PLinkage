<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PLinkageApp.ViewsAndroid.ViewProjectOwnerProfile"
    x:Name="ThisPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="#F8F9FC"
    Shell.NavBarIsVisible="False">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- Gradient header -->
            <Grid HeightRequest="200">
                <Grid.Background>
                    <LinearGradientBrush EndPoint="0,1">
                        <GradientStop Color="#B388FF" Offset="0.0" />
                        <GradientStop Color="#7C4DFF" Offset="1.0" />
                    </LinearGradientBrush>
                </Grid.Background>

                <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="8">
                    <Image Source="default_avatar.png" HeightRequest="80" WidthRequest="80" />
                    <Label x:Name="OwnerNameLabel" FontAttributes="Bold" FontSize="22" TextColor="White" HorizontalOptions="Center" />
                    <Label x:Name="LocationLabel" FontSize="14" TextColor="White" HorizontalOptions="Center" />
                    <Label x:Name="JoinedDateLabel" FontSize="13" TextColor="White" HorizontalOptions="Center" />
                </VerticalStackLayout>
            </Grid>

            <!-- Buttons -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="15" Margin="0,10,0,0">
                <Button Text="Message" BackgroundColor="#7C4DFF" TextColor="White" FontAttributes="Bold"
                        CornerRadius="8" WidthRequest="130" />
                <Button Text="Deactivate" BackgroundColor="#D84315" TextColor="White" FontAttributes="Bold"
                        CornerRadius="8" WidthRequest="130" />
            </HorizontalStackLayout>

            <!-- Information section -->
            <Label Text="Information" FontAttributes="Bold" FontSize="18" Margin="0,20,0,5" TextColor="Black" />
            <Frame BorderColor="#7C4DFF" CornerRadius="10" Padding="15" BackgroundColor="White">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Gender:" FontAttributes="Bold" TextColor="Black" />
                    <Label x:Name="GenderLabel" FontSize="14" TextColor="#333" />

                    <Label Text="Email:" FontAttributes="Bold" Margin="0,8,0,0" TextColor="Black" />
                    <Label x:Name="EmailLabel" FontSize="14" TextColor="#333" />

                    <Label Text="Mobile:" FontAttributes="Bold" Margin="0,8,0,0" TextColor="Black" />
                    <Label x:Name="MobileLabel" FontSize="14" TextColor="#333" />
                </VerticalStackLayout>
            </Frame>

            <!-- My Projects Section -->
            <Label Text="My Projects" FontAttributes="Bold" FontSize="18" Margin="0,10,0,5" TextColor="Black" />

            <HorizontalStackLayout Spacing="5" VerticalOptions="Center">
                <Image Source="filter_icon.png" HeightRequest="16" WidthRequest="16" />
                <Label Text="Filter by" FontSize="13" TextColor="Gray" />
            </HorizontalStackLayout>

            <!-- NOTE: x:Name is required so code-behind can reference it -->
            <CollectionView x:Name="ProjectsCollection" SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="#B388FF" CornerRadius="10" Padding="10" BackgroundColor="White" Margin="0,5,0,0">
                            <Grid ColumnDefinitions="*,Auto">
                                <VerticalStackLayout Grid.Column="0" Spacing="4">
                                    <Label Text="{Binding Title}" FontAttributes="Bold" FontSize="16" TextColor="Black" />
                                    <Label Text="{Binding Description}" FontSize="13" TextColor="#333" />
                                    <Label Text="{Binding Status}" FontSize="13" TextColor="{Binding StatusColor}" />
                                </VerticalStackLayout>

                                <!-- Use x:Reference to call the page's BindingContext command -->
                                <ImageButton
                                    Grid.Column="1"
                                    Source="eye_icon.png"
                                    WidthRequest="24"
                                    HeightRequest="24"
                                    BackgroundColor="Transparent"
                                    Command="{Binding Source={x:Reference ThisPage}, Path=BindingContext.ViewProjectCommand}"
                                    CommandParameter="{Binding .}" />
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
